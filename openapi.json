{
    "openapi": "3.1.0",
    "info": {
        "title": "Breeze Prompter API",
        "description": "\n# Breeze Prompter API\n\nAn AI-powered service that analyzes and enhances prompts to make them more effective for AI systems.\n\n## Features\n- **Prompt Analysis**: Identifies ambiguities, missing information, and areas for improvement\n- **Smart Enhancement**: Generates optimized versions with better clarity and specificity\n- **Document Context**: Supports additional context from documents for more accurate enhancements\n- **Scoring System**: Rates prompts on clarity, specificity, and completeness\n- **Context-Aware**: Tailors enhancements based on domain (coding, writing, analysis, etc.)\n- **Style Options**: Supports different output styles (concise, detailed, technical, conversational)\n- **GPT Custom Action Support**: Simplified endpoint for ChatGPT custom actions\n\n## Endpoints\n\n### For GPT Custom Actions\n- **POST `/api/gpt-enhance`**: Simplified endpoint that returns only the enhanced prompt\n  - Accepts document context for additional information\n  - Returns a single enhanced prompt string\n  - Perfect for ChatGPT custom actions\n\n### For Full Analysis\n- **POST `/api/perfect-prompt`**: Full analysis with scores and explanations\n\n## Authentication\nAPI key required in header: `X-API-Key: your-api-key`\n\n## Usage\nFor GPT custom actions, use `/api/gpt-enhance` to get just the enhanced prompt.\nFor full analysis, use `/api/perfect-prompt` to get detailed feedback.\n",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "https://breeze-prompter.onrender.com",
            "description": "Production server (Render)"
        },
        {
            "url": "http://localhost:8000",
            "description": "Development server"
        },
        {
            "url": "http://localhost:8002",
            "description": "Alternative development server"
        }
    ],
    "tags": [
        {
            "name": "GPT Actions",
            "description": "Endpoints optimized for ChatGPT Custom Actions"
        },
        {
            "name": "Analysis",
            "description": "Full prompt analysis endpoints"
        },
        {
            "name": "System",
            "description": "Operational and health endpoints"
        }
    ],
    "paths": {
        "/api/perfect-prompt": {
            "post": {
                "summary": "Perfect a prompt",
                "description": "Analyzes and enhances a prompt to make it more effective for AI systems",
                "tags": ["Analysis"],
                "operationId": "perfectPrompt",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PromptRequest"
                            },
                            "example": {
                                "prompt": "Write a Python function to reverse a string.",
                                "context": "coding",
                                "style": "detailed",
                                "include_examples": false,
                                "fetch_current_knowledge": false
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PromptResponse"
                                },
                                "example": {
                                    "original_prompt": "Write a Python function to reverse a string.",
                                    "enhanced_prompt": "You are a helpful Python assistant. Task: Implement a function reverse_string(s: str) -> str that returns the reversed input string. Requirements: handle empty strings; preserve whitespace and punctuation; include 3 doctest-style examples including an empty string, a single-word string, and a sentence with punctuation.",
                                    "improvements": [
                                        {
                                            "category": "Specificity",
                                            "description": "Added explicit function signature and requirements",
                                            "before": "",
                                            "after": "Implement reverse_string(s: str) -> str"
                                        }
                                    ],
                                    "explanation": "The enhanced prompt clarifies the task, provides a signature, and adds testable examples.",
                                    "score_before": {
                                        "clarity": 55,
                                        "specificity": 40,
                                        "completeness": 45,
                                        "overall": 47
                                    },
                                    "score_after": {
                                        "clarity": 92,
                                        "specificity": 90,
                                        "completeness": 88,
                                        "overall": 90
                                    },
                                    "tips": [
                                        "State explicit inputs/outputs",
                                        "Add constraints and examples"
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ]
            }
        },
        "/api/gpt-enhance": {
            "post": {
                "summary": "Enhance prompt for GPT (simplified)",
                "description": "Simplified endpoint for GPT custom actions - returns only the enhanced prompt",
                "tags": ["GPT Actions"],
                "operationId": "gptEnhancePrompt",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/GPTPromptRequest"
                            },
                            "example": {
                                "prompt": "Summarize the attached report for an executive audience.",
                                "document_context": "Report: 2024 Q2 performance...",
                                "context": "analysis",
                                "style": "concise",
                                "fetch_current_info": false
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GPTPromptResponse"
                                },
                                "example": {
                                    "enhanced_prompt": "You are a concise analyst. Task: Summarize the 2024 Q2 performance report for executives. Include: topline revenue and growth vs Q1; key wins/losses; 2-3 risks; 2 actionable recommendations. Keep under 120 words."
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ]
            }
        },
        "/api/health": {
            "get": {
                "summary": "Health check",
                "description": "Check if the API is running",
                "tags": ["System"],
                "operationId": "healthCheck",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "status": { "type": "string" },
                                        "service": { "type": "string" }
                                    }
                                },
                                "example": {
                                    "status": "healthy",
                                    "service": "Breeze Prompter API"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ]
            }
        },
        "/": {
            "get": {
                "summary": "Root",
                "tags": ["System"],
                "operationId": "root",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "name": { "type": "string" },
                                        "version": { "type": "string" },
                                        "description": { "type": "string" },
                                        "documentation": { "type": "string" },
                                        "openapi": { "type": "string" }
                                    }
                                },
                                "example": {
                                    "name": "Breeze Prompter API",
                                    "version": "1.0.0",
                                    "description": "AI-powered prompt enhancement service",
                                    "documentation": "/docs",
                                    "openapi": "/openapi.json"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "ErrorResponse": {
                "properties": {
                    "error": {
                        "type": "string",
                        "title": "Error",
                        "description": "Error message"
                    },
                    "detail": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Detail",
                        "description": "Detailed error information"
                    }
                },
                "type": "object",
                "required": [
                    "error"
                ],
                "title": "ErrorResponse"
            },
            "GPTPromptRequest": {
                "properties": {
                    "prompt": {
                        "type": "string",
                        "title": "Prompt",
                        "description": "The prompt to enhance"
                    },
                    "document_context": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Document Context",
                        "description": "Additional document context to consider when enhancing the prompt"
                    },
                    "context": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/PromptContext"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "description": "The domain context (coding, writing, analysis, etc.)",
                        "default": "general"
                    },
                    "style": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/PromptStyle"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "description": "Output style preference",
                        "default": "detailed"
                    },
                    "fetch_current_info": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Fetch Current Info",
                        "description": "Fetch current information for time-sensitive queries",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "prompt"
                ],
                "title": "GPTPromptRequest",
                "description": "Simplified request for GPT custom actions",
                "example": {
                    "prompt": "Summarize the main arguments of the attached document.",
                    "document_context": "Paper: Large Language Models are changing...",
                    "context": "analysis",
                    "style": "concise",
                    "fetch_current_info": false
                }
            },
            "GPTPromptResponse": {
                "properties": {
                    "enhanced_prompt": {
                        "type": "string",
                        "title": "Enhanced Prompt",
                        "description": "The enhanced, optimized prompt"
                    }
                },
                "type": "object",
                "required": [
                    "enhanced_prompt"
                ],
                "title": "GPTPromptResponse",
                "description": "Simplified response for GPT custom actions - just the enhanced prompt",
                "example": {
                    "enhanced_prompt": "You are a concise analyst. Task: Summarize the document for executives in under 120 words, covering topline metrics, key drivers, and 2 risks."
                }
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "Improvement": {
                "properties": {
                    "category": {
                        "type": "string",
                        "title": "Category",
                        "description": "The category of improvement"
                    },
                    "description": {
                        "type": "string",
                        "title": "Description",
                        "description": "Description of the improvement"
                    },
                    "before": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Before",
                        "description": "The original text"
                    },
                    "after": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "After",
                        "description": "The improved text"
                    }
                },
                "type": "object",
                "required": [
                    "category",
                    "description"
                ],
                "title": "Improvement"
            },
            "PromptContext": {
                "type": "string",
                "enum": [
                    "coding",
                    "writing",
                    "analysis",
                    "creative",
                    "technical",
                    "general"
                ],
                "title": "PromptContext"
            },
            "PromptRequest": {
                "properties": {
                    "prompt": {
                        "type": "string",
                        "title": "Prompt",
                        "description": "The original prompt to be enhanced"
                    },
                    "context": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/PromptContext"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "description": "The domain or context for the prompt",
                        "default": "general"
                    },
                    "style": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/PromptStyle"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "description": "The preferred style for the enhanced prompt",
                        "default": "detailed"
                    },
                    "include_examples": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Include Examples",
                        "description": "Whether to include examples in the enhanced prompt",
                        "default": false
                    },
                    "fetch_current_knowledge": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Fetch Current Knowledge",
                        "description": "Whether to fetch current information from web search for time-sensitive topics",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "prompt"
                ],
                "title": "PromptRequest",
                "example": {
                    "prompt": "Draft an email to request a product demo.",
                    "context": "writing",
                    "style": "conversational",
                    "include_examples": false,
                    "fetch_current_knowledge": false
                }
            },
            "PromptResponse": {
                "properties": {
                    "original_prompt": {
                        "type": "string",
                        "title": "Original Prompt",
                        "description": "The original input prompt"
                    },
                    "enhanced_prompt": {
                        "type": "string",
                        "title": "Enhanced Prompt",
                        "description": "The optimized version of the prompt"
                    },
                    "improvements": {
                        "items": {
                            "$ref": "#/components/schemas/Improvement"
                        },
                        "type": "array",
                        "title": "Improvements",
                        "description": "List of specific improvements made"
                    },
                    "explanation": {
                        "type": "string",
                        "title": "Explanation",
                        "description": "Explanation of why the enhanced version is more effective"
                    },
                    "score_before": {
                        "$ref": "#/components/schemas/PromptScore",
                        "description": "Score of the original prompt"
                    },
                    "score_after": {
                        "$ref": "#/components/schemas/PromptScore",
                        "description": "Score of the enhanced prompt"
                    },
                    "tips": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tips",
                        "description": "Additional tips for future prompts"
                    }
                },
                "type": "object",
                "required": [
                    "original_prompt",
                    "enhanced_prompt",
                    "improvements",
                    "explanation",
                    "score_before",
                    "score_after"
                ],
                "title": "PromptResponse",
                "example": {
                    "original_prompt": "Draft an email to request a product demo.",
                    "enhanced_prompt": "You are a professional sales rep. Draft a concise outreach email requesting a 30-minute product demo. Include: a friendly greeting, a one-sentence value proposition tailored to the recipient, 2 time slots next week, and a polite call-to-action. Keep under 120 words.",
                    "improvements": [
                        {"category": "Clarity", "description": "Specified clear CTA"}
                    ],
                    "explanation": "Clarifies audience, constraints, and action, making it immediately actionable.",
                    "score_before": {"clarity": 60, "specificity": 50, "completeness": 55, "overall": 55},
                    "score_after": {"clarity": 92, "specificity": 90, "completeness": 88, "overall": 90},
                    "tips": ["State explicit goal", "Limit length", "Offer options"]
                }
            },
            "PromptScore": {
                "properties": {
                    "clarity": {
                        "type": "integer",
                        "maximum": 100.0,
                        "minimum": 0.0,
                        "title": "Clarity",
                        "description": "Clarity score (0-100)"
                    },
                    "specificity": {
                        "type": "integer",
                        "maximum": 100.0,
                        "minimum": 0.0,
                        "title": "Specificity",
                        "description": "Specificity score (0-100)"
                    },
                    "completeness": {
                        "type": "integer",
                        "maximum": 100.0,
                        "minimum": 0.0,
                        "title": "Completeness",
                        "description": "Completeness score (0-100)"
                    },
                    "overall": {
                        "type": "integer",
                        "maximum": 100.0,
                        "minimum": 0.0,
                        "title": "Overall",
                        "description": "Overall effectiveness score (0-100)"
                    }
                },
                "type": "object",
                "required": [
                    "clarity",
                    "specificity",
                    "completeness",
                    "overall"
                ],
                "title": "PromptScore"
            },
            "PromptStyle": {
                "type": "string",
                "enum": [
                    "concise",
                    "detailed",
                    "technical",
                    "conversational"
                ],
                "title": "PromptStyle"
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            }
        },
        "securitySchemes": {
            "ApiKeyAuth": {
                "type": "apiKey",
                "in": "header",
                "name": "X-API-Key"
            }
        }
    }
}
